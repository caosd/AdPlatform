<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.stomato.dao.MenuDao">

	<resultMap type="com.stomato.domain.Menu" id="menu"> 
		<result property="id" column="id" />
		<result property="name" column="name" />
		<result property="desc" column="desc" />
		<result property="path" column="path"/>
		<result property="parent" column="parent"/>
		<result property="issible" column="issible"/>
		<result property="orderNo" column="order_no"/>
	</resultMap>
	
	<insert id="addMenu" parameterType="com.stomato.domain.Menu">
		insert into t_menu(name, desc, path,parent,issible,order_no) values(#{name}, #{desc}, #{path},#{parent},#{issible},#{order_no})
	</insert>
	
	<select id="getMenu" parameterType="int" resultMap="menu" >
		select id,name, desc, path,parent,issible,order_no from t_menu where id=#{id}
	</select>
	 
	<select id="listMenu" parameterType="com.stomato.domain.PublicParam" resultMap="menu" >
		select id,role_name, status, create_date from t_menu
	</select>
	<select id="listTotal" parameterType="com.stomato.domain.PublicParam" resultType="int">
		select count(1) from t_menu
		<if test="paramList != null">
		 	where 1=1
			<foreach item="item" collection="paramList" open=" and " separator=" and ">
				#{item.first}=#{item.second}
			</foreach>
		</if>
	</select>
	<update id="updateMenu" parameterType="com.stomato.domain.Menu">
		update t_menu
        <set>
            <if test="name != null">name=#{name},</if>
            <if test="desc != null">desc=#{desc},</if>
            <if test="path != null">path=#{path},</if>
            <if test="parent != null">parent=#{parent},</if>
            <if test="issible != null">issible=#{issible},</if>
            <if test="orderNo != null">order_no=#{orderNo},</if>
        </set>
		where id=#{id}
	</update>
	
	<delete id="deleteMenu" parameterType="com.stomato.domain.Menu">
        delete from t_menu where id=#{id}
	</delete>
	
</mapper>